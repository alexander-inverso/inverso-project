<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALEXANDER // THINK 4D</title>
    <!-- Fuentes de alto impacto -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;700&family=Syne:wght@700;800&display=swap" rel="stylesheet">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #fbfbfb; /* Crema muy claro */
        }
        canvas {
            display: block;
            touch-action: none;
        }
    </style>
</head>
<body>

    <canvas id="mainCanvas"></canvas>

    <script>
        /**
         * ALEXANDER INTERACTIVE ENGINE v5.0
         * Propósito: Renderizado 100% en Canvas con escalado dinámico.
         * Estética: Geometría, Poster-Design, Branding de Alto Impacto.
         */

        const canvas = document.getElementById('mainCanvas');
        const ctx = canvas.getContext('2d');

        // --- PALETA DE COLORES (Eliminado el rojo) ---
        const THEME = {
            bg: '#fbfbfb',
            ink: '#0e0e0e',
            accent: '#1D4ED8', // Azul Eléctrico (Alexander Blue)
            secondary: '#FACC15', // Amarillo Energético
            grid: '#e5e5e5',
            white: '#ffffff'
        };

        // --- ESTADO GLOBAL ---
        let STATE = {
            page: 'HOME',
            scrollY: 0,
            targetScrollY: 0,
            width: 0,
            height: 0,
            dpr: window.devicePixelRatio || 1,
            mouseX: 0,
            mouseY: 0,
            isClicked: false,
            clickPos: { x: 0, y: 0 },
            hoverId: null,
            animFrame: 0,
            shapes: []
        };

        // --- CONTENIDO ---
        const CONTENT = {
            axioms: ["THINK 4D", "BE DIFFERENT, NOT INDIFFERENT", "DESIGN YOUR FUTURE", "BIOLOGY IS CODE"],
            essays: [
                { id: 'e1', title: "La Muerte como Fallo de Software", tag: "BIO-LOGIC", status: "REVISADO", color: THEME.accent },
                { id: 'e2', title: "Mecanización de la EBAU: Matemáticas", tag: "STRATEGY", status: "PENDIENTE", color: THEME.ink },
                { id: 'e3', title: "Transparencia Radical: One Take", tag: "MANIFESTO", status: "DRAFT", color: THEME.secondary }
            ],
            funding: [
                { goal: "LIYSF Londres", current: 1800, total: 2400, unit: "€" },
                { goal: "BIYSC Barcelona", current: 450, total: 1200, unit: "€" }
            ],
            bio: "Estudiante de 17 años. No busco el 'aprobado', busco la 'maestría'. Mi trayectoria está trazada hacia la ETH Zúrich para hackear el código fuente de la biología. Soy un outsider competente."
        };

        // --- SISTEMA DE NAVEGACIÓN ---
        const NAV = [
            { id: 'HOME', label: 'COVER' },
            { id: 'ESSAYS', label: 'ENSAYOS' },
            { id: 'WHO', label: 'WHO AM I' },
            { id: 'GOAL', label: 'LIYSF/BIYSC' }
        ];

        // --- FUNCIONES DE ESCALADO (V-Units) ---
        const vw = (v) => (STATE.width / 100) * v;
        const vh = (v) => (STATE.height / 100) * v;
        const vmin = (v) => Math.min(vw(v), vh(v));

        function init() {
            resize();
            createGeometricArt();
            requestAnimationFrame(loop);
        }

        function resize() {
            STATE.width = window.innerWidth;
            STATE.height = window.innerHeight;
            canvas.width = STATE.width * STATE.dpr;
            canvas.height = STATE.height * STATE.dpr;
            canvas.style.width = STATE.width + 'px';
            canvas.style.height = STATE.height + 'px';
            ctx.scale(STATE.dpr, STATE.dpr);
        }

        function createGeometricArt() {
            STATE.shapes = [];
            for(let i=0; i<25; i++) {
                STATE.shapes.push({
                    x: Math.random() * 100,
                    y: Math.random() * 200,
                    size: Math.random() * 20 + 5,
                    rot: Math.random() * Math.PI * 2,
                    type: Math.random() > 0.5 ? 'rect' : 'poly',
                    v: (Math.random() - 0.5) * 0.05
                });
            }
        }

        // --- INPUTS ---
        window.addEventListener('resize', resize);
        window.addEventListener('mousemove', (e) => {
            STATE.mouseX = e.clientX;
            STATE.mouseY = e.clientY;
        });
        window.addEventListener('mousedown', (e) => {
            STATE.isClicked = true;
            STATE.clickPos = { x: e.clientX, y: e.clientY + STATE.scrollY };
        });
        window.addEventListener('mouseup', () => STATE.isClicked = false);
        window.addEventListener('wheel', (e) => {
            STATE.targetScrollY += e.deltaY;
            if(STATE.targetScrollY < 0) STATE.targetScrollY = 0;
            // Max scroll dinámico según página
            let max = vh(STATE.page === 'HOME' ? 20 : 150);
            if(STATE.targetScrollY > max) STATE.targetScrollY = max;
        });

        // --- RENDER LOOP ---
        function loop() {
            STATE.animFrame++;
            STATE.scrollY += (STATE.targetScrollY - STATE.scrollY) * 0.1;
            
            ctx.clearRect(0, 0, STATE.width, STATE.height);
            ctx.fillStyle = THEME.bg;
            ctx.fillRect(0, 0, STATE.width, STATE.height);

            drawBackground();

            ctx.save();
            ctx.translate(0, -STATE.scrollY);
            
            switch(STATE.page) {
                case 'HOME': drawHome(); break;
                case 'ESSAYS': drawEssays(); break;
                case 'WHO': drawWho(); break;
                case 'GOAL': drawGoal(); break;
            }

            ctx.restore();

            drawHeader();
            drawMarquee();

            // Reset interaction state
            STATE.hoverId = null;
            requestAnimationFrame(loop);
        }

        // --- ELEMENTOS UI ---

        function drawBackground() {
            ctx.save();
            ctx.translate(0, -STATE.scrollY * 0.2);
            STATE.shapes.forEach(s => {
                ctx.save();
                ctx.translate(vw(s.x), vh(s.y));
                ctx.rotate(s.rot + STATE.animFrame * s.v);
                ctx.strokeStyle = THEME.grid;
                ctx.lineWidth = 1;
                if(s.type === 'rect') ctx.strokeRect(-vw(s.size)/2, -vw(s.size)/2, vw(s.size), vw(s.size));
                else {
                    ctx.beginPath();
                    ctx.moveTo(0, -vw(s.size));
                    ctx.lineTo(vw(s.size), vw(s.size));
                    ctx.lineTo(-vw(s.size), vw(s.size));
                    ctx.closePath();
                    ctx.stroke();
                }
                ctx.restore();
            });
            ctx.restore();
        }

        function drawHeader() {
            const h = 80;
            ctx.fillStyle = THEME.bg;
            ctx.fillRect(0, 30, STATE.width, h);
            
            // Brand
            ctx.fillStyle = THEME.ink;
            ctx.font = `800 ${vmin(4)}px Syne`;
            ctx.textAlign = 'left';
            ctx.fillText('ALEXANDER.', 40, 30 + 50);

            // Nav
            const navWidth = vw(40);
            const startX = STATE.width - navWidth - 40;
            NAV.forEach((item, i) => {
                const x = startX + (navWidth / NAV.length) * i;
                const isHover = hitTest(x, 30, 100, h, true);
                const isActive = STATE.page === item.id;

                if(isHover) {
                    STATE.hoverId = item.id;
                    ctx.fillStyle = THEME.accent;
                    if(STATE.isClicked) {
                        STATE.page = item.id;
                        STATE.targetScrollY = 0;
                        STATE.isClicked = false;
                    }
                } else {
                    ctx.fillStyle = isActive ? THEME.ink : '#999';
                }

                ctx.font = `700 ${vmin(1.5)}px Space Grotesk`;
                ctx.textAlign = 'center';
                ctx.fillText(item.label, x + 50, 30 + 50);
                if(isActive) {
                    ctx.fillRect(x + 25, 30 + 60, 50, 3);
                }
            });
        }

        function drawMarquee() {
            const h = 30;
            ctx.fillStyle = THEME.ink;
            ctx.fillRect(0, 0, STATE.width, h);
            
            ctx.fillStyle = THEME.white;
            ctx.font = `700 12px Space Grotesk`;
            const text = CONTENT.axioms.join('   ///   ') + '   ///   ';
            const textW = ctx.measureText(text).width;
            const offset = (STATE.animFrame * 2) % textW;
            
            ctx.fillText(text, -offset, 20);
            ctx.fillText(text, -offset + textW, 20);
        }

        function drawHome() {
            let y = 250;
            // Título Principal
            ctx.fillStyle = THEME.ink;
            ctx.font = `800 ${vmin(12)}px Syne`;
            ctx.textAlign = 'left';
            
            ctx.fillText('THINK', 40, y);
            y += vmin(11);
            
            // Efecto Subrayado Grueso
            ctx.fillStyle = THEME.accent;
            ctx.fillRect(40, y - vmin(2), vmin(30), vmin(3));
            ctx.fillStyle = THEME.ink;
            ctx.fillText('4D.', 40, y);

            // Slogan
            y += 60;
            ctx.font = `400 ${vmin(2.5)}px Space Grotesk`;
            const lines = ["Be different,", "not indifferent."];
            lines.forEach((l, i) => {
                ctx.fillText(l, 40, y + (i * vmin(3)));
            });

            // Botón Call to Action (Zine style)
            const btnW = 220;
            const btnH = 60;
            const btnX = 40;
            const btnY = y + 100;
            const hov = hitTest(btnX, btnY, btnW, btnH);
            
            ctx.fillStyle = hov ? THEME.ink : THEME.accent;
            ctx.fillRect(btnX, btnY, btnW, btnH);
            ctx.fillStyle = THEME.white;
            ctx.font = `700 16px Space Grotesk`;
            ctx.textAlign = 'center';
            ctx.fillText('LEER ENSAYOS →', btnX + btnW/2, btnY + 37);

            if(hov && STATE.isClicked) {
                STATE.page = 'ESSAYS';
                STATE.isClicked = false;
            }
        }

        function drawEssays() {
            let y = 200;
            ctx.fillStyle = THEME.ink;
            ctx.font = `800 ${vmin(6)}px Syne`;
            ctx.fillText('ENSAYOS.', 40, y);
            
            y += 80;

            const cardW = Math.min(vw(90), 400);
            const cardH = 200;

            CONTENT.essays.forEach((essay, i) => {
                const cardY = y + (i * (cardH + 20));
                const hov = hitTest(40, cardY, cardW, cardH);

                // Dibujar Card
                ctx.fillStyle = hov ? THEME.white : '#fff';
                ctx.shadowBlur = hov ? 20 : 0;
                ctx.shadowColor = 'rgba(0,0,0,0.1)';
                ctx.fillRect(40, cardY, cardW, cardH);
                ctx.shadowBlur = 0;

                ctx.strokeStyle = THEME.ink;
                ctx.lineWidth = 4;
                ctx.strokeRect(40, cardY, cardW, cardH);

                // Contenido
                ctx.fillStyle = THEME.ink;
                ctx.font = `700 12px Space Grotesk`;
                ctx.fillText(essay.tag, 60, cardY + 40);
                
                // Badge Status
                ctx.fillStyle = essay.color;
                ctx.fillRect(cardW - 60, cardY + 25, 80, 20);
                ctx.fillStyle = THEME.white;
                ctx.font = `700 10px Space Grotesk`;
                ctx.textAlign = 'center';
                ctx.fillText(essay.status, cardW - 20, cardY + 39);

                ctx.fillStyle = THEME.ink;
                ctx.textAlign = 'left';
                ctx.font = `700 24px Syne`;
                wrapText(essay.title, 60, cardY + 80, cardW - 40, 30);

                if(hov && STATE.isClicked) {
                    alert('Accediendo al ensayo: ' + essay.title);
                    STATE.isClicked = false;
                }
            });
        }

        function drawWho() {
            let y = 200;
            ctx.font = `800 ${vmin(8)}px Syne`;
            ctx.fillStyle = THEME.ink;
            ctx.fillText('WHO AM I?', 40, y);
            
            y += 100;
            ctx.font = `400 ${vmin(3)}px Space Grotesk`;
            wrapText(CONTENT.bio, 40, y, vw(80), vmin(4.5));

            // Metáfora Geométrica
            const centerX = STATE.width * 0.7;
            const centerY = y + 100;
            ctx.save();
            ctx.translate(centerX, centerY);
            ctx.rotate(STATE.animFrame * 0.01);
            ctx.strokeStyle = THEME.accent;
            ctx.lineWidth = 10;
            ctx.strokeRect(-80, -80, 160, 160);
            ctx.rotate(-STATE.animFrame * 0.02);
            ctx.strokeStyle = THEME.secondary;
            ctx.beginPath();
            ctx.arc(0, 0, 100, 0, Math.PI*2);
            ctx.stroke();
            ctx.restore();
        }

        function drawGoal() {
            let y = 200;
            ctx.font = `800 ${vmin(6)}px Syne`;
            ctx.fillStyle = THEME.ink;
            ctx.fillText('TARGET: SCIENCE.', 40, y);
            
            y += 100;

            CONTENT.funding.forEach(item => {
                ctx.fillStyle = THEME.ink;
                ctx.font = `700 20px Space Grotesk`;
                ctx.fillText(item.goal, 40, y);
                
                // Barra
                const barW = vw(80);
                const barH = 40;
                ctx.strokeStyle = THEME.ink;
                ctx.lineWidth = 3;
                ctx.strokeRect(40, y + 20, barW, barH);
                
                const progress = item.current / item.total;
                ctx.fillStyle = THEME.secondary;
                ctx.fillRect(40, y + 20, barW * progress, barH);
                
                ctx.fillStyle = THEME.ink;
                ctx.font = `700 14px Space Grotesk`;
                ctx.fillText(`${item.current}${item.unit} / ${item.total}${item.unit}`, 40 + barW + 10, y + 45);

                y += 120;
            });

            // Botón GoFundMe
            const bX = 40, bY = y, bW = 300, bH = 60;
            const h = hitTest(bX, bY, bW, bH);
            ctx.fillStyle = h ? THEME.ink : THEME.accent;
            ctx.fillRect(bX, bY, bW, bH);
            ctx.fillStyle = THEME.white;
            ctx.textAlign = 'center';
            ctx.fillText('APOYAR EN GOFUNDME', bX + bW/2, bY + 37);
        }

        // --- HELPERS ---

        function hitTest(x, y, w, h, fixed = false) {
            const my = fixed ? STATE.mouseY : STATE.mouseY + STATE.scrollY;
            return STATE.mouseX >= x && STATE.mouseX <= x + w && my >= y && my <= y + h;
        }

        function wrapText(text, x, y, maxWidth, lineHeight) {
            const words = text.split(' ');
            let line = '';
            for (let n = 0; n < words.length; n++) {
                let testLine = line + words[n] + ' ';
                let metrics = ctx.measureText(testLine);
                let testWidth = metrics.width;
                if (testWidth > maxWidth && n > 0) {
                    ctx.fillText(line, x, y);
                    line = words[n] + ' ';
                    y += lineHeight;
                } else {
                    line = testLine;
                }
            }
            ctx.fillText(line, x, y);
        }

        // --- START ---
        window.onload = init;

    </script>
</body>
</html>

